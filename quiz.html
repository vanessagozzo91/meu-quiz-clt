<!DOCTYPE html>
<html lang="pt-BR">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>AnÃ¡lise de CrÃ©dito Expressa</title>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
Â  Â  <script src="https://unpkg.com/imask"></script>
Â  Â Â 
Â  Â  <script>
Â  Â  Â  Â  // Pixel do Facebook (Mantenha o seu ID aqui)
Â  Â  Â  Â  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window, document,'script','https://connect.facebook.com/en_US/fbevents.js');fbq('init', '1406224567314703');fbq('track', 'PageView');
Â  Â  </script>
Â  Â  <noscript>
Â  Â  Â  Â  <img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1406224567314703&ev=PageView&noscript=1"/>
Â  Â  </noscript>

Â  Â  <style>
Â  Â  Â  Â  /* Mantenha seu CSS aqui */
Â  Â  Â  Â  body { font-family: 'Inter', sans-serif; background-color: #f7f9fb; margin:0; padding-top: 60px; padding-bottom: 60px; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
Â  Â  Â  Â  .hidden { display: none; }
Â  Â  Â  Â  .form-card { max-width: 500px; width: 90%; margin: 0px auto; background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); text-align:center; border: 1px solid #f0f4f7; }
Â  Â  Â  Â  .orange-text-gradient { background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700; }
Â  Â  Â  Â  .page-header-logo { margin-bottom: 20px; text-align: center; }
Â  Â  Â  Â  .form-card .page-header-logo { margin-bottom: 30px; }
Â  Â  Â  Â  .question h3 { font-size: 1.5rem; margin-bottom: 15px; font-weight: 600; color: #1f2937; }
Â  Â  Â  Â  .step-indicator { font-size: 0.95rem; font-weight: 500; margin-bottom: 25px; color: #6b7280; }
Â  Â  Â  Â  .option-btn { display:block; width:100%; padding:18px; margin-bottom:15px; border-radius:12px; background: linear-gradient(90deg, #ff6b35 0%, #f7931e 100%); border: none; cursor:pointer; font-weight: 700; font-size: 1.05rem; color: #ffffff; transition: all 0.3s; box-shadow: 0 6px 15px rgba(247, 147, 30, 0.4); line-height: 1.2; }
Â  Â  Â  Â  .option-btn:hover { background: linear-gradient(90deg, #f7931e 0%, #ff6b35 100%); color: #ffffff; transform: translateY(-2px); box-shadow: 0 8px 20px rgba(247, 147, 30, 0.5); }
Â  Â  Â  Â  /* Novos estilos para CPF e Data */
Â  Â  Â  Â  .input-group { display: flex; gap: 10px; margin-top: 15px; }
Â  Â  Â  Â  .input-group input { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; background-color: #f9fafb; color: #1f2937; font-size: 1.1rem; box-sizing: border-box; text-align: center; transition: border 0.3s, box-shadow 0.3s; }
Â  Â  Â  Â  .input-group input::placeholder { color: #9ca3af; }
Â  Â  Â  Â  .input-group input:focus { border-color: #f7931e; box-shadow: 0 0 0 3px rgba(247, 147, 30, 0.2); outline: none; }
Â  Â  Â  Â  #cpf-input, #birth-date-input { margin-top: 0; }
Â  Â  Â  Â  /* Mensagens de erro */
Â  Â  Â  Â  #cpf-error-message, #idade-error-message { color: #ef4444; font-size: 0.85rem; margin-top: 5px; font-weight: 500; }
Â  Â  Â  Â  .title-message { font-size: 1.8rem; font-weight: 700; color: #ef4444; margin: 30px 0 15px; }Â 
Â  Â  Â  Â  .result-text { color: #4b5563; }Â 
Â  Â  Â  Â  .cta-btn { display: inline-flex; align-items: center; margin-top: 25px; padding: 15px 35px; background: linear-gradient(90deg, #ff6b35 0%, #f7931e 100%); color: white; border-radius: 12px; font-size: 1.15rem; font-weight: 700; text-decoration: none; transition: all 0.3s; box-shadow: 0 8px 20px rgba(247, 147, 30, 0.4); cursor: pointer; border: none; }
Â  Â  Â  Â  .cta-btn:hover { background: linear-gradient(90deg, #f7931e 0%, #ff6b35 100%); box-shadow: 0 10px 25px rgba(247, 147, 30, 0.5); }
Â  Â  Â  Â  .quiz-title { font-size: 1.5rem; margin-bottom: 1.25rem; padding-bottom: 0.75rem; border-bottom: 1px solid #e5e7eb; color: #000; }
Â  Â  Â  Â  .logo-text-bold { font-weight: 700; letter-spacing: 0.05em; }
Â  Â  Â  Â  .logo-text-size { font-size: 1.5rem; }
Â  Â  Â  Â  .text-center { text-align: center; }
Â  Â  Â  Â  .leading-tight { line-height: 1.25; }Â 
Â  Â  Â  Â  .text-sm { font-size: 0.875rem; }
Â  Â  Â  Â  .mt-3 { margin-top: 0.75rem; }
Â  Â  Â  Â  .text-gray-500 { color: #6b7280; }
Â  Â  Â  Â  @media (max-width: 600px) {
Â  Â  Â  Â  Â  Â  .form-card { padding: 20px; border-radius: 0; width: 100%; min-height: 100vh; margin: 0; box-shadow: none; }
Â  Â  Â  Â  Â  Â  body { padding: 0; }
Â  Â  Â  Â  Â  Â  .question h3 { font-size: 1.35rem; }
Â  Â  Â  Â  Â  Â  .input-group { flex-direction: column; gap: 0; }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â Â 
Â  Â  <div class="form-card" id="formContainer">
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="page-header-logo">
Â  Â  Â  Â  Â  Â  <div class="text-center leading-tight">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="logo-text-size logo-text-bold text-black">ESPECIAL</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="logo-text-size logo-text-bold orange-text-gradient">CRÃ‰DITO</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <h1 class="quiz-title text-black">
Â  Â  Â  Â  Â  Â  <span class="orange-text-gradient">PrÃ©-AnÃ¡lise</span> RÃ¡pida
Â  Â  Â  Â  </h1>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div id="step-info" class="step-indicator"></div>

Â  Â  Â  Â  <div id="quizQuestions">
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div id="question1" class="question" data-step="1" data-q-key="q1">
Â  Â  Â  Â  Â  Â  Â  Â  <h3>A empresa onde vocÃª trabalha tem:</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="option-btn" data-answer="Menos de 30 funcionarios" onclick="nextQuestion(1, this)">Menos de 30 funcionÃ¡rios</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="option-btn" data-answer="30 ou Mais funcionarios" onclick="nextQuestion(1, this)">30 ou Mais funcionÃ¡rios</button>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="question2" class="question hidden" data-step="2" data-q-key="q2">
Â  Â  Â  Â  Â  Â  Â  Â  <h3>HÃ¡ quanto tempo vocÃª estÃ¡ registrado no seu emprego atual?</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="option-btn" data-answer="Menos de 6 meses" onclick="nextQuestion(2, this)">Menos de 6 meses</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="option-btn" data-answer="6 meses ou mais" onclick="nextQuestion(2, this)">6 meses ou mais</button>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="question3" class="question hidden" data-step="3" data-q-key="q3">
Â  Â  Â  Â  Â  Â  Â  Â  <h3>VocÃª jÃ¡ realizou algum emprÃ©stimo consignado CLT?</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="option-btn" data-answer="JÃ¡ realizei" onclick="nextQuestion(3, this)">JÃ¡ realizei</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="option-btn" data-answer="Ainda nÃ£o" onclick="nextQuestion(3, this)">Ainda nÃ£o</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div id="question4" class="question hidden" data-step="4">
Â  Â  Â  Â  Â  Â  Â  Â  <h3>Sua prÃ©-anÃ¡lise foi <span class="orange-text-gradient">aprovada</span>! Para simulaÃ§Ã£o, informe <span class="orange-text-gradient">CPF e Data de Nascimento</span>:</h3>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="cpf-input" placeholder="CPF (000.000.000-00)" maxlength="14" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="birth-date-input" placeholder="Nascimento (DD/MM/AAAA)" maxlength="10" required>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <p id="cpf-error-message" class="hidden">Por favor, digite um CPF vÃ¡lido com 11 dÃ­gitos.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p id="idade-error-message" class="hidden">âŒ Idade fora da polÃ­tica (21 a 59 anos).</p>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm mt-3 text-gray-500">Seus dados sÃ£o usados apenas para a simulaÃ§Ã£o com o consultor e nÃ£o serÃ£o armazenados sem consentimento.</p>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <button class="cta-btn" id="cpf-btn">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg class="w-6 h-6 mr-3" fill="currentColor" viewBox="0 0 24 24" width="24" height="24">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.516"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  REALIZAR SIMULAÃ‡ÃƒO
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="resultFail" class="hidden">
Â  Â  Â  Â  Â  Â  <div class="title-message">PRÃ‰-ANÃLISE CONCLUÃDA</div>
Â  Â  Â  Â  Â  Â  <p class="result-text text-lg">Obrigado pelo seu interesse! No momento, seu perfil nÃ£o atende aos requisitos mÃ­nimos de crÃ©dito Consignado CLT.</p>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â Â 
Â  Â  <iframe name="iframeLeadTarget" id="iframeLeadTarget" style="display:none;"></iframe>

Â  Â  <script>
Â  Â  Â  Â  // â­ï¸â­ï¸ POR FAVOR, CONFIRA ESTES DOIS VALORES! â­ï¸â­ï¸
Â  Â  Â  Â  const WHATSAPP_PHONE = '5514974000725';Â 
Â  Â  Â  Â  // ğŸš¨ SUBSTITUA pelo URL de EXECUÃ‡ÃƒO da sua ImplantaÃ§Ã£o APÃ“S salvar o code.gs V4.0
Â  Â  Â  Â  const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwl1aWk0XavXE2L7qwrk_3XNlJku6pK76ezVSJ8moyMCeo_PKQ96HFLh2NzGSikThxB/exec';Â 
Â  Â  Â  Â  // â­ï¸â­ï¸ ----------------------------------------- â­ï¸â­ï¸
Â  Â  Â  Â Â 
Â  Â  Â  Â  const totalSteps = 4;
Â  Â  Â  Â  let currentStep = 1;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Objeto de dados do quiz com TODOS os 8 campos de rastreamento + FBP
Â  Â  Â  Â  let quizData = {
Â  Â  Â  Â  Â  Â  fbclid: '',
Â  Â  Â  Â  Â  Â  fbp: '',Â 
Â  Â  Â  Â  Â  Â  utm_source: '',
Â  Â  Â  Â  Â  Â  utm_campaign: '',
Â  Â  Â  Â  Â  Â  ad_id: '',
Â  Â  Â  Â  Â  Â  utm_medium: '',
Â  Â  Â  Â  Â  Â  utm_content: '',
Â  Â  Â  Â  Â  Â  utm_term: '',
Â  Â  Â  Â  Â  Â  placement: ''
Â  Â  Â  Â  };
Â  Â  Â  Â Â 
Â  Â  Â  Â  const cpfInput = document.getElementById('cpf-input');
Â  Â  Â  Â  const dateInput = document.getElementById('birth-date-input');
Â  Â  Â  Â  const cpfBtn = document.getElementById('cpf-btn');
Â  Â  Â  Â  const cpfErrorMsg = document.getElementById('cpf-error-message');
Â  Â  Â  Â  const idadeErrorMsg = document.getElementById('idade-error-message');

Â  Â  Â  Â  // MÃ¡scaras
Â  Â  Â  Â  const cpfMask = IMask(cpfInput, { mask: '000.000.000-00' });
Â  Â  Â  Â  const dateMask = IMask(dateInput, { mask: '00/00/0000' });

Â  Â  Â  Â  function updateStepIndicator() {
Â  Â  Â  Â  Â  Â  const stepElement = document.getElementById('step-info');
Â  Â  Â  Â  Â  Â  const displayStep = Math.min(currentStep, 3);
Â  Â  Â  Â  Â  Â  stepElement.innerHTML = `Passo <span class="orange-text-gradient">${displayStep}</span> de 3`;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // FunÃ§Ã£o para calcular a idade
Â  Â  Â  Â  function calculateAge(birthDateString) {
Â  Â  Â  Â  Â  Â  const parts = birthDateString.split('/');
Â  Â  Â  Â  Â  Â  if (parts.length !== 3) return null;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const day = parseInt(parts[0], 10);
Â  Â  Â  Â  Â  Â  const month = parseInt(parts[1], 10) - 1;
Â  Â  Â  Â  Â  Â  const year = parseInt(parts[2], 10);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const today = new Date();
Â  Â  Â  Â  Â  Â  const birthDate = new Date(year, month, day);

Â  Â  Â  Â  Â  Â  let age = today.getFullYear() - birthDate.getFullYear();
Â  Â  Â  Â  Â  Â  const m = today.getMonth() - birthDate.getMonth();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
Â  Â  Â  Â  Â  Â  Â  Â  age--;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  return age;
Â  Â  Â  Â  }

Â  Â  Â  Â  // FunÃ§Ã£o para ler o cookie _fbp
Â  Â  Â  Â  function getFBP() {
Â  Â  Â  Â  Â  Â  const name = '_fbp=';
Â  Â  Â  Â  Â  Â  const decodedCookie = decodeURIComponent(document.cookie);
Â  Â  Â  Â  Â  Â  const ca = decodedCookie.split(';');
Â  Â  Â  Â  Â  Â  for(let i = 0; i <ca.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  let c = ca[i];
Â  Â  Â  Â  Â  Â  Â  Â  while (c.charAt(0) === ' ') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  c = c.substring(1);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  if (c.indexOf(name) === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return c.substring(name.length, c.length);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  return '';
Â  Â  Â  Â  }

Â  Â  Â  Â  function readTrackingParamsFromQuery() {
Â  Â  Â  Â  Â  Â  console.log("Iniciando leitura de parÃ¢metros e cookies...");
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const queryString = window.location.search;
Â  Â  Â  Â  Â  Â  if (queryString) {
Â  Â  Â  Â  Â  Â  Â  Â  const urlParams = new URLSearchParams(queryString);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  quizData.fbclid = urlParams.get("fbclid") || '';
Â  Â  Â  Â  Â  Â  Â  Â  quizData.utm_source = urlParams.get("utm_source") || '';
Â  Â  Â  Â  Â  Â  Â  Â  quizData.utm_campaign = urlParams.get("utm_campaign") || '';
Â  Â  Â  Â  Â  Â  Â  Â  quizData.ad_id = urlParams.get("ad_id") || urlParams.get("utm_id") || '';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  quizData.utm_medium = urlParams.get("utm_medium") || '';
Â  Â  Â  Â  Â  Â  Â  Â  quizData.utm_content = urlParams.get("utm_content") || '';
Â  Â  Â  Â  Â  Â  Â  Â  quizData.utm_term = urlParams.get("utm_term") || '';
Â  Â  Â  Â  Â  Â  Â  Â  quizData.placement = urlParams.get("placement") || '';
Â  Â  Â  Â  Â  Â  }Â 
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  quizData.fbp = getFBP();Â 

Â  Â  Â  Â  Â  Â  console.log("SUCESSO: ParÃ¢metros lidos. FBP: " + (quizData.fbp ? quizData.fbp : 'NÃƒO ENCONTRADO'));
Â  Â  Â  Â  }

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  Â  Â  readTrackingParamsFromQuery();Â 
Â  Â  Â  Â  Â  Â  updateStepIndicator();
Â  Â  Â  Â  });

Â  Â  Â  Â  function nextQuestion(step, button) {
Â  Â  Â  Â  Â  Â  const answer = button.getAttribute('data-answer');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // â­ï¸ REGRA DE REPROVAÃ‡ÃƒO Q1: Tamanho da Empresa (Menos de 30 funcionÃ¡rios) â­ï¸
Â  Â  Â  Â  Â  Â  if (step === 1 && answer === "Menos de 30 funcionarios") {
Â  Â  Â  Â  Â  Â  Â  Â  showFail();
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // REGRA DE REPROVAÃ‡ÃƒO Q2: Tempo de CLT (Menos de 6 meses)
Â  Â  Â  Â  Â  Â  if (step === 2 && answer === "Menos de 6 meses") {
Â  Â  Â  Â  Â  Â  Â  Â  showFail();
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // REGRA DE REPROVAÃ‡ÃƒO Q3: Consignado Anterior (JÃ¡ realizei)
Â  Â  Â  Â  Â  Â  if (step === 3 && answer === "JÃ¡ realizei") {
Â  Â  Â  Â  Â  Â  Â  Â  showFail();
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  document.getElementById(`question${step}`).classList.add('hidden');
Â  Â  Â  Â  Â  Â  currentStep++;
Â  Â  Â  Â  Â  Â  updateStepIndicator();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (currentStep <= totalSteps) {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById(`question${currentStep}`).classList.remove('hidden');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  function showCpfError(show, isIdadeError = false) {
Â  Â  Â  Â  Â  Â  const targetError = isIdadeError ? idadeErrorMsg : cpfErrorMsg;
Â  Â  Â  Â  Â  Â  const targetInput = isIdadeError ? dateInput : cpfInput;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Limpa ambos os erros visuais antes de aplicar o novo
Â  Â  Â  Â  Â  Â  cpfInput.style.border = '1px solid #d1d5db';
Â  Â  Â  Â  Â  Â  cpfInput.style.boxShadow = 'none';
Â  Â  Â  Â  Â  Â  dateInput.style.border = '1px solid #d1d5db';
Â  Â  Â  Â  Â  Â  dateInput.style.boxShadow = 'none';
Â  Â  Â  Â  Â  Â  cpfErrorMsg.classList.add('hidden');
Â  Â  Â  Â  Â  Â  idadeErrorMsg.classList.add('hidden');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (show) {
Â  Â  Â  Â  Â  Â  Â  Â  targetInput.style.border = '2px solid #ef4444';
Â  Â  Â  Â  Â  Â  Â  Â  targetInput.style.boxShadow = '0 0 10px rgba(239, 68, 68, 0.5)';
Â  Â  Â  Â  Â  Â  Â  Â  targetError.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  targetInput.focus();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  cpfBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  const unmaskedCpf = cpfMask.unmaskedValue;
Â  Â  Â  Â  Â  Â  const unmaskedDate = dateMask.unmaskedValue;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // 1. ValidaÃ§Ã£o do CPF
Â  Â  Â  Â  Â  Â  if (unmaskedCpf.length !== 11) {
Â  Â  Â  Â  Â  Â  Â  Â  showCpfError(true, false);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // 2. ValidaÃ§Ã£o da Data de Nascimento (formato DD/MM/AAAA)
Â  Â  Â  Â  Â  Â  if (unmaskedDate.length !== 8) {
Â  Â  Â  Â  Â  Â  Â  Â  idadeErrorMsg.textContent = "Por favor, preencha a data completa (DD/MM/AAAA).";
Â  Â  Â  Â  Â  Â  Â  Â  showCpfError(true, true);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // 3. ValidaÃ§Ã£o da Idade (21 a 59 anos)
Â  Â  Â  Â  Â  Â  const idade = calculateAge(dateMask.value);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (idade === null || idade < 21 || idade > 59) {
Â  Â  Â  Â  Â  Â  Â  Â  idadeErrorMsg.textContent = "âŒ Idade fora da polÃ­tica (21 a 59 anos).";
Â  Â  Â  Â  Â  Â  Â  Â  showCpfError(true, true);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Se chegou atÃ© aqui, Ã© vÃ¡lido!
Â  Â  Â  Â  Â  Â  showCpfError(false);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  quizData['cpf'] = unmaskedCpf;Â 
Â  Â  Â  Â  Â  Â  quizData['cpf_formatado'] = cpfMask.value;Â 
Â  Â  Â  Â  Â  Â  quizData['data_nascimento'] = dateMask.value;
Â  Â  Â  Â  Â  Â  quizData['idade'] = idade;

Â  Â  Â  Â  Â  Â  sendLeadAndRedirect();Â 
Â  Â  Â  Â  });

Â  Â  Â  Â  // FUNÃ‡ÃƒO FINAL DE ENVIO CAPI E REDIRECIONAMENTO
Â  Â  Â  Â Â 
Â  Â  Â  Â  function generateWhatsAppURL() {
Â  Â  Â  Â  Â  Â  const cpfFormatado = quizData.cpf_formatado || 'NÃ£o Informado';
Â  Â  Â  Â  Â  Â  const dataNascimento = quizData.data_nascimento || 'NÃ£o Informada';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const mensagemPura = `*PRÃ‰-APROVADO* âœ…\n\nCPF: ${cpfFormatado}\nData de Nascimento: ${dataNascimento}\n\nOlÃ¡! Gostaria de falar com o consultor para realizar minha simulaÃ§Ã£o de crÃ©dito.`;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return `https://wa.me/${WHATSAPP_PHONE}?text=${encodeURIComponent(mensagemPura)}`;
Â  Â  Â  Â  }

Â  Â  Â  Â  function redirectToWhatsApp() {
Â  Â  Â  Â  Â  Â  const whatsappUrl = generateWhatsAppURL();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const newWindow = window.open(whatsappUrl, '_blank');Â 
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (!newWindow || newWindow.closed || typeof newWindow.closed == 'undefined') {
Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = whatsappUrl;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function sendLeadFormSubmission(dadosLead) {
Â  Â  Â  Â  Â  Â  const form = document.createElement('form');
Â  Â  Â  Â  Â  Â  form.method = 'POST';
Â  Â  Â  Â  Â  Â  form.action = APPS_SCRIPT_URL;
Â  Â  Â  Â  Â  Â  form.target = 'iframeLeadTarget';Â 
Â  Â  Â  Â  Â  Â  form.style.display = 'none';

Â  Â  Â  Â  Â  Â  dadosLead.timestamp_local = new Date().toLocaleString('pt-BR');
Â  Â  Â  Â  Â  Â  dadosLead.page_url = window.location.href;
Â  Â  Â  Â  Â  Â  dadosLead.user_agent = navigator.userAgent;Â 

Â  Â  Â  Â  Â  Â  for (const key in dadosLead) {
Â  Â  Â  Â  Â  Â  Â  Â  if (dadosLead.hasOwnProperty(key)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const input = document.createElement('input');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  input.type = 'hidden';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  input.name = key;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  input.value = dadosLead[key];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  form.appendChild(input);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  document.body.appendChild(form);
Â  Â  Â  Â  Â  Â  form.submit();
Â  Â  Â  Â  Â  Â  console.log('Dados do Lead enviados para a planilha via formulÃ¡rio:', dadosLead);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  setTimeout(() => form.remove(), 1000);
Â  Â  Â  Â  }

Â  Â  Â  Â  function sendLeadAndRedirect() {
Â  Â  Â  Â  Â  Â  // 1. DISPARA O EVENTO DE LEAD NO PIXEL (Navegador)Â 
Â  Â  Â  Â  Â  Â  **fbq('trackCustom', 'QuizPassou');** // Linha ALTERADA: De 'Lead' para 'QuizPassou'
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Monta o objeto final de dados com todos os parÃ¢metros de rastreamento
Â  Â  Â  Â  Â  Â  const dadosLead = {
Â  Â  Â  Â  Â  Â  Â  Â  cpf: quizData.cpf || '',Â 
Â  Â  Â  Â  Â  Â  Â  Â  data_nascimento: quizData.data_nascimento || '',
Â  Â  Â  Â  Â  Â  Â  Â  idade: quizData.idade || '',
Â  Â  Â  Â  Â  Â  Â  Â  fbclid: quizData.fbclid || '',
Â  Â  Â  Â  Â  Â  Â  Â  fbp: quizData.fbp || '',Â 
Â  Â  Â  Â  Â  Â  Â  Â  utm_source: quizData.utm_source || '',
Â  Â  Â  Â  Â  Â  Â  Â  utm_campaign: quizData.utm_campaign || '',
Â  Â  Â  Â  Â  Â  Â  Â  ad_id: quizData.ad_id || '',
Â  Â  Â  Â  Â  Â  Â  Â  utm_medium: quizData.utm_medium || '',
Â  Â  Â  Â  Â  Â  Â  Â  utm_content: quizData.utm_content || '',
Â  Â  Â  Â  Â  Â  Â  Â  utm_term: quizData.utm_term || '',
Â  Â  Â  Â  Â  Â  Â  Â  placement: quizData.placement || '',
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  console.log("Objeto 'dadosLead' que serÃ¡ enviado para a planilha (VERIFIQUE O FBP):", dadosLead);

Â  Â  Â  Â  Â  Â  // 2. ENVIA LEAD PARA O APPS SCRIPT
Â  Â  Â  Â  Â  Â  sendLeadFormSubmission(dadosLead);

Â  Â  Â  Â  Â  Â  // 3. REDIRECIONA PARA O WHATSAPP (com um pequeno delay para garantir o envio)
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  redirectToWhatsApp();
Â  Â  Â  Â  Â  Â  }, 500);
Â  Â  Â  Â  }

Â  Â  Â  Â  function showFail() {
Â  Â  Â  Â  Â  Â  document.getElementById('quizQuestions').classList.add('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('step-info').classList.add('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('resultFail').classList.remove('hidden');
Â  Â  Â  Â  Â  Â  fbq('trackCustom', 'QuizReprovado');Â 
Â  Â  Â  Â  }
Â  Â  </script>
</body>
</html>
